---
- name: Configure common components on all nodes
  hosts: all
  become: true
  roles:
    - common
    - docker
    - registry
    - dns
  tags: [all]

- name: Configure K3s master node
  hosts: k3s_masters
  become: true
  roles:
    - k3s_control_plane
  tags: [master]

- name: Configure K3s worker nodes
  hosts: k3s_workers
  become: true
  roles:
    - k3s_worker
  tags: [worker]
